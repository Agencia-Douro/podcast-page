"use client"

import { useState } from "react"
import { usePathname } from "next/navigation"
import { Link } from "@/i18n/navigation"

export const SocialMediaButton = () => {
    const pathname = usePathname()
    const [isOpen, setIsOpen] = useState(false)

    // Não mostrar o botão nas páginas de admin
    if (pathname?.startsWith('/admin')) {
        return null
    }

    const socialLinks = [
        {
            name: "WhatsApp",
            href: "https://wa.me/351919766324",
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <path d="M16.0001 2.66699C23.3638 2.66699 29.3334 8.63653 29.3334 16.0003C29.3334 23.3641 23.3638 29.3337 16.0001 29.3337C13.5549 29.3337 11.2635 28.6755 9.29325 27.5266L2.67232 29.3337L4.47493 22.709C3.32536 20.7385 2.66675 18.4463 2.66675 16.0003C2.66675 8.63653 8.63628 2.66699 16.0001 2.66699ZM11.1885 9.74477C11.016 9.75689 10.8469 9.79902 10.6929 9.87781C10.5773 9.93691 10.4701 10.0223 10.3016 10.1815C10.1424 10.3317 10.0502 10.463 9.95303 10.5895C9.4601 11.2313 9.19516 12.0191 9.20008 12.8283C9.20276 13.4825 9.37268 14.1182 9.64103 14.7118C10.1852 15.9155 11.0826 17.1881 12.268 18.3682C12.5528 18.6517 12.8317 18.9382 13.1326 19.203C14.6038 20.4985 16.3572 21.4326 18.253 21.9313C18.253 21.9313 18.9997 22.0459 19.0106 22.0466C19.258 22.0599 19.5049 22.0421 19.7525 22.0294C20.1409 22.0094 20.5201 21.9043 20.8633 21.7215C21.084 21.6041 21.1884 21.5457 21.3736 21.4289C21.3736 21.4289 21.4304 21.3905 21.54 21.3089C21.72 21.1747 21.8312 21.0803 21.9809 20.9249C22.0913 20.8102 22.1862 20.6747 22.2596 20.5221C22.3638 20.3045 22.4688 19.8891 22.5105 19.5442C22.5424 19.2807 22.5328 19.1367 22.5293 19.0475C22.5236 18.9041 22.405 18.7565 22.2752 18.6938L21.4998 18.3453C21.4998 18.3453 20.3405 17.8407 19.6314 17.5173C19.5576 17.4835 19.4768 17.4679 19.3956 17.463C19.2177 17.4521 19.0184 17.4985 18.8916 17.6321C18.8849 17.6294 18.7966 17.7057 17.832 18.8743C17.7788 18.9379 17.6541 19.0762 17.4385 19.0633C17.406 19.061 17.3736 19.0563 17.342 19.0481C17.2546 19.025 17.1696 18.9946 17.0864 18.9594C16.9214 18.8894 16.8636 18.8629 16.7509 18.8143C15.9812 18.4781 15.2748 18.0282 14.6504 17.4777C14.4829 17.3302 14.3272 17.1714 14.1666 17.0158C13.6064 16.4727 13.1477 15.8951 12.8065 15.3254C12.7878 15.2943 12.7591 15.2494 12.7282 15.1991C12.6724 15.1083 12.6108 15.0003 12.5915 14.9262C12.5419 14.7301 12.6734 14.5725 12.6734 14.5725C12.6734 14.5725 12.998 14.2177 13.1487 14.0247C13.2938 13.839 13.419 13.6574 13.4988 13.5279C13.6558 13.2754 13.7056 13.0145 13.623 12.8132C13.249 11.9012 12.863 10.9941 12.4653 10.0922C12.3867 9.91426 12.1532 9.78494 11.9409 9.76042C11.869 9.75211 11.7971 9.74376 11.7249 9.73902C11.5461 9.7303 11.367 9.73222 11.1885 9.74477Z" fill="url(#paint0_linear_1078_246)" />
                    <defs>
                        <linearGradient id="paint0_linear_1078_246" x1="16.0001" y1="2.66699" x2="16.0001" y2="29.3337" gradientUnits="userSpaceOnUse">
                            <stop stopColor="#25D366" />
                            <stop offset="1" stopColor="#11BF52" />
                        </linearGradient>
                    </defs>
                </svg>
            )
        },
        {
            name: "Instagram",
            href: "https://www.instagram.com/agenciadouro",
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <path d="M17.3696 2.66699C18.8701 2.66947 19.6305 2.67742 20.2876 2.69698L20.5464 2.70543C20.8453 2.71606 21.1402 2.72939 21.4958 2.74606C22.9146 2.81162 23.8825 3.03606 24.7325 3.36606C25.6113 3.70495 26.3536 4.16273 27.0946 4.90385C27.8346 5.64495 28.2925 6.38939 28.6325 7.26606C28.9613 8.11495 29.1858 9.08385 29.2525 10.5027C29.2684 10.8583 29.2812 11.1532 29.2917 11.4522L29.3001 11.711C29.3196 12.368 29.3285 13.1285 29.3313 14.6291L29.3324 15.6232C29.3325 15.7447 29.3325 15.87 29.3325 15.9994L29.3324 16.3755L29.3316 17.3698C29.329 18.8703 29.3212 19.6308 29.3016 20.2878L29.293 20.5466C29.2825 20.8456 29.2692 21.1406 29.2525 21.496C29.1869 22.915 28.9613 23.8827 28.6325 24.7327C28.2936 25.6116 27.8346 26.3539 27.0946 27.095C26.3536 27.835 25.608 28.2927 24.7325 28.6327C23.8825 28.9616 22.9146 29.186 21.4958 29.2527C21.1402 29.2686 20.8453 29.2815 20.5464 29.2919L20.2876 29.3003C19.6305 29.3199 18.8701 29.3287 17.3696 29.3316L16.3753 29.3327C16.2538 29.3327 16.1285 29.3327 15.9992 29.3327H15.623L14.6288 29.3318C13.1282 29.3294 12.3677 29.3214 11.7107 29.3018L11.452 29.2934C11.153 29.2827 10.858 29.2694 10.5025 29.2527C9.08359 29.1872 8.11692 28.9616 7.26581 28.6327C6.38803 28.2939 5.64469 27.835 4.90359 27.095C4.16248 26.3539 3.70581 25.6083 3.36581 24.7327C3.03581 23.8827 2.81248 22.915 2.74581 21.496C2.72997 21.1406 2.71705 20.8456 2.70659 20.5466L2.6982 20.2878C2.67869 19.6308 2.6698 18.8703 2.66692 17.3698L2.66675 14.6291C2.66923 13.1285 2.67716 12.368 2.69672 11.711L2.70519 11.4522C2.71581 11.1532 2.72915 10.8583 2.74581 10.5027C2.81136 9.08273 3.03581 8.11606 3.36581 7.26606C3.70469 6.38829 4.16248 5.64495 4.90359 4.90385C5.64469 4.16273 6.38915 3.70606 7.26581 3.36606C8.11581 3.03606 9.08248 2.81273 10.5025 2.74606C10.858 2.73023 11.153 2.71731 11.452 2.70685L11.7107 2.69846C12.3677 2.67894 13.1282 2.67005 14.6288 2.66717L17.3696 2.66699ZM15.9992 9.33273C12.3153 9.33273 9.33248 12.3188 9.33248 15.9994C9.33248 19.6832 12.3185 22.666 15.9992 22.666C19.683 22.666 22.6658 19.68 22.6658 15.9994C22.6658 12.3155 19.6797 9.33273 15.9992 9.33273ZM15.9992 11.9994C18.2084 11.9994 19.9992 13.7896 19.9992 15.9994C19.9992 18.2086 18.2089 19.9994 15.9992 19.9994C13.79 19.9994 11.9991 18.2092 11.9991 15.9994C11.9991 13.7902 13.7893 11.9994 15.9992 11.9994ZM22.9992 7.33273C22.0801 7.33273 21.3325 8.07927 21.3325 8.99826C21.3325 9.91726 22.079 10.665 22.9992 10.665C23.9181 10.665 24.6658 9.91842 24.6658 8.99826C24.6658 8.07927 23.9169 7.33158 22.9992 7.33273Z" fill="url(#paint0_linear_1078_248)" />
                    <defs>
                        <linearGradient id="paint0_linear_1078_248" x1="15.9996" y1="2.66699" x2="15.9996" y2="29.3327" gradientUnits="userSpaceOnUse">
                            <stop stopColor="#E1306C" />
                            <stop offset="1" stopColor="#CD1C58" />
                        </linearGradient>
                    </defs>
                </svg>
            )
        },
        {
            name: "Email",
            href: "mailto:contato@agenciadouro.com",
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <path d="M4.00008 4H28.0001C28.7365 4 29.3334 4.59696 29.3334 5.33333V26.6667C29.3334 27.4031 28.7365 28 28.0001 28H4.00008C3.26371 28 2.66675 27.4031 2.66675 26.6667V5.33333C2.66675 4.59696 3.26371 4 4.00008 4ZM16.0809 15.5772L7.52971 8.31693L5.80379 10.3497L16.0975 19.0895L26.2059 10.3415L24.4609 8.32512L16.0809 15.5772Z" fill="url(#paint0_linear_1078_250)" />
                    <defs>
                        <linearGradient id="paint0_linear_1078_250" x1="16.0001" y1="4" x2="16.0001" y2="28" gradientUnits="userSpaceOnUse">
                            <stop stopColor="#5F6368" />
                            <stop offset="1" stopColor="#4B4F54" />
                        </linearGradient>
                    </defs>
                </svg>
            )
        },
        {
            name: "Facebook",
            href: "https://www.facebook.com/agenciadouro",
            icon: (
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <path d="M16.0001 2.66699C8.63628 2.66699 2.66675 8.63653 2.66675 16.0003C2.66675 22.6554 7.54255 28.1714 13.9168 29.1717V19.8545H10.5313V16.0003H13.9168V13.0628C13.9168 9.72117 15.9073 7.87533 18.9529 7.87533C20.4117 7.87533 21.9376 8.13574 21.9376 8.13574V11.417H20.2562C18.6 11.417 18.0834 12.4448 18.0834 13.4993V16.0003H21.7813L21.1902 19.8545H18.0834V29.1717C24.4576 28.1714 29.3334 22.6554 29.3334 16.0003C29.3334 8.63653 23.3638 2.66699 16.0001 2.66699Z" fill="url(#paint0_linear_1078_252)" />
                    <defs>
                        <linearGradient id="paint0_linear_1078_252" x1="16.0001" y1="2.66699" x2="16.0001" y2="29.1717" gradientUnits="userSpaceOnUse">
                            <stop stopColor="#1877F2" />
                            <stop offset="1" stopColor="#0463DE" />
                        </linearGradient>
                    </defs>
                </svg>
            )
        }
    ]

    return (
        <div className="fixed bottom-[calc(1.5rem+env(safe-area-inset-bottom))] right-[calc(1.5rem+env(safe-area-inset-right))] z-40 flex flex-col items-end gap-3">
            {/* Bubble com todos os ícones */}
            <div
                className={`bg-white rounded-full shadow-lg p-3 transition-all duration-300 ease-out ${isOpen
                    ? 'opacity-100 translate-y-0 pointer-events-auto'
                    : 'opacity-0 translate-y-8 pointer-events-none'
                    }`}>
                <div className="flex flex-col items-center gap-6 h-min">
                    {socialLinks.map((social) => (
                        <Link
                            key={social.name}
                            href={social.href}
                            target="_blank"
                            rel="noopener noreferrer"
                            className="transition-transform duration-200 hover:scale-110"
                            onClick={() => setIsOpen(false)}>
                            <div className="size-8 flex items-center justify-center">
                                {social.icon}
                            </div>
                        </Link>
                    ))}
                </div>
            </div>

            {/* Botão Principal */}
            <button
                onClick={() => setIsOpen(!isOpen)}
                className="cursor-pointer bg-deaf will-change-transform text-white p-3 rounded-full shadow-md transition-all duration-300 hover:scale-105"
                aria-label="Social Media"
            >
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <path d="M8.60609 25.3333L2.66669 30V5.33333C2.66669 4.59696 3.26365 4 4.00002 4H28C28.7364 4 29.3334 4.59696 29.3334 5.33333V24C29.3334 24.7364 28.7364 25.3333 28 25.3333H8.60609ZM14.6667 18.6667V21.3333H17.3334V18.6667H14.6667ZM11.4231 11.7513L14.0384 12.2744C14.2208 11.3576 15.0298 10.6667 16 10.6667C17.1046 10.6667 18 11.5621 18 12.6667C18 13.7712 17.1046 14.6667 16 14.6667H14.6667V17.3333H16C18.5774 17.3333 20.6667 15.244 20.6667 12.6667C20.6667 10.0893 18.5774 8 16 8C13.736 8 11.8485 9.61225 11.4231 11.7513Z" fill="#1A1A1A" />
                </svg>
            </button>
        </div>
    )
}
